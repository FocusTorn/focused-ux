# Testing Structure Overview

This directory contains the standardized testing structure for the Context Cherry Picker Core package.

## Directory Structure

### 📁 `__mocks__`

**Purpose**: Shared mocking utilities and helpers used across multiple test files. Not needed for one-off single mocks needed by individual test files.

Contains:

- `globals.ts` - Global mock configurations and utilities
- `helpers.ts` - Reusable mock helper functions
- `mock-scenario-builder.ts` - Builder pattern for creating complex mock scenarios
- `structure-auditor-guide.md` - Guide for maintaining test structure compliance
- `test-structure-violations.md` - Documentation of test structure violations

### 📁 `_reports`

**Purpose**: Test execution reports and coverage data.

Contains:

- `coverage/` - Coverage reports generated by vitest

### 📁 `coverage-tests`

**Purpose**: Tests solely designed to increase the coverage report percentage. These tests focus on covering edge cases and uncovered code paths.

Contains:

- `_readme.md` - Details about coverage-specific tests
- `trial-coverage-test.test-cov.ts` - Example coverage test file

### 📁 `functional-tests`

**Purpose**: Main vitest test suites containing the core functionality tests. Can be broken down into sub-folders if test suites become too large.

Contains:

- `CCP_Manager-orchestration.test.ts` - Manager service orchestration tests
- `CCP_Storage.service.test.ts` - Storage service tests
- `ContextDataCollectorService.test.ts` - Context data collection tests
- `ContextFormattingService.test.ts` - Context formatting tests
- `FileContentProviderService.test.ts` - File content provider tests
- `FileExplorerService.test.ts` - File explorer service tests
- `FileUtils.service.test.ts` - File utilities tests
- `FileUtilsService.test.ts` - File utilities service tests
- `GoogleGenAiService.test.ts` - Google GenAI service tests
- `ManagerService.test.ts` - Manager service tests
- `QuickSettingsService.test.ts` - Quick settings service tests
- `SavedStatesService.test.ts` - Saved states service tests
- `StorageService.test.ts` - Storage service tests
- `TokenizerService.test.ts` - Tokenizer service tests
- `TreeFormatter.service.test.ts` - Tree formatter service tests
- `TreeFormatterService.test.ts` - Tree formatter service tests

### 📁 `isolated-tests`

**Purpose**: ADHOC one-off tests that are not run when executing the main test suite. Used for debugging, experimentation, or temporary test scenarios.

Contains:

- `_readme.md` - Details about isolated test usage and guidelines

## Testing Guidelines

1. **Functional Tests**: Place all main functionality tests in `functional-tests/`
2. **Coverage Tests**: Use `coverage-tests/` for tests that specifically target uncovered code paths
3. **Isolated Tests**: Use `isolated-tests/` for temporary or experimental tests
4. **Shared Mocks**: Use `__mocks__/` for reusable mock utilities
5. **Reports**: Coverage and test reports are automatically generated in `_reports/`

## Running Tests

- **All Tests**: `pnpm exec vitest run`
- **Functional Tests Only**: `pnpm exec vitest run functional-tests`
- **Coverage Tests Only**: `pnpm exec vitest run coverage-tests`
- **With Coverage**: `pnpm exec vitest run --coverage`
