ğŸ“ dynamicons/assets
ğŸ“ assets
ğŸ“ icons
ğŸ“ new_icons <-- Icon actions stages the icons from externalIconSource here
ğŸ“ file_icons <-- static, contents are not touched
ğŸ“ folder_icons <-- static, contents are not touched
ğŸ“ themes <-- static, contents are not touched
ğŸ“ dist
ğŸ“ assets
ğŸ“ images
ğŸ“ preview-images
ğŸ“„ File_icons_preview.png <-- Icon preview image generated by pupeteer
ğŸ“„ Folder_icons_preview.png <-- Icon preview image generated by pupeteer
ğŸ“„ Folder_Open_icons_preview.png <-- Icon preview image generated by pupeteer
ğŸ“ themes
ğŸ“„ base.theme.json <-- Base theme generated by the asset script
ğŸ“„ dynamicons.theme.json <-- Modified theme generated by the asset script

## **ASSET GENERATION FLOW STATUS**

The asset generation follows this general flow:

1. **process-icons.ts**: Localize/stage new icons -> optimize -> place is correct destination icon directory
2. **audit-models.ts**: Audit the models and icon directory contents
3. **generate-themes.ts**: Generate the theme files
4. **audit-themes.ts**: Audit the theme files (not yet completed)
5. **generate-previews.ts**: Generate the preview images

All json parsing should leverage the strip json comments package

### âœ… **STEP 1: Icon Processing (`process-icons.ts`)**

**Status: COMPLETED âœ…**

- âœ… **Staging**: External source icon staging with proper constants usage
- âœ… **Organization**: Icon categorization into file_icons/folder_icons
- âœ… **Optimization**: SVGO optimization with compression statistics
- âœ… **Preview Generation**: Smart regeneration with change detection
- âœ… Clean output formatting with verbose mode control

### âœ… **STEP 2: Model Auditing (`audit-models.ts`)**

**Status: COMPLETED âœ…**

- âœ… Model validation and error reporting implemented
- âœ… Assignment error detection (assigned icon not found)
- âœ… Orphaned icon detection (icons in directories not assigned)
- âœ… Duplicate assignment detection
- âœ… Tree-structured error output with proper formatting
- âœ… CLI interface for standalone model auditing

### âœ… **STEP 3: Theme Generation (`generate-themes.ts`)**

**Status: COMPLETED âœ…**

- âœ… Delete-then-generate sequence implemented
- âœ… Model validation integration (uses `audit-models.ts`)
- âœ… Consolidated success messages with proper ANSI colors
- âœ… Early exit on deletion/generation failures
- âœ… Dark grey, dashed file paths for generated themes
- âœ… Suppression of unwanted output from underlying scripts
- âœ… **Language Assignment Integration**: Processes `language_icons.model.json` and includes language assignments in generated themes
- âœ… **Model-Driven Generation**: Only includes icons explicitly assigned in models (excludes "unassigned" arrays and orphaned icons)
- âœ… **Standardized Model Keys**: Uses `languageID` and `iconName` keys across all model files

### âœ… **STEP 4: Theme File Auditing (`audit-themes.ts`)**

**Status: COMPLETED âœ…**

- âœ… **Theme File Validation**: Existence and identity verification for base.theme.json and dynamicons.theme.json
- âœ… **Icon Assignment Validation**: Comprehensive validation of file, folder, and language icon assignments
- âœ… **Folder Icon Pairing**: Proper handling of `_folder-basic` and `_folder-basic-open` pairs with grouping logic
- âœ… **Missing Icon Detection**: Identifies theme assignments that reference non-existent icon files
- âœ… **Orphaned Icon Detection**: Finds icons in directories that are not assigned in theme files
- âœ… **Duplicate Assignment Detection**: Identifies duplicate assignments within theme files
- âœ… **Tree-Structured Output**: Uses configurable tree formatter with theme-specific section titles
- âœ… **CLI Interface**: Standalone theme auditing with proper exit codes
- âœ… **Underscore Prefix Handling**: Correctly processes theme assignments with underscore prefixes

### âœ… **STEP 5: Preview Generation (`generate-previews.ts`)**

**Status: COMPLETED âœ…**

- âœ… Automatically detects icon changes (staged > 0 or optimized > 0)
- âœ… Forces regeneration when changes detected
- âœ… Deletes existing previews, verifies deletion success
- âœ… Generates new previews using `generatePreviewsMain('all', true)`
- âœ… Verifies all three files created successfully
- âœ… Clean success/failure messages with proper ANSI colors
- âœ… CLI interface for standalone preview generation
- âœ… Force regeneration option (`--force` flag)

## **CURRENT IMPLEMENTATION STATUS**

### âœ… **COMPLETED ITEMS**

1. **Complete Asset Generation Workflow** - All 5 Steps
    - âœ… **Step 1**: Icon Processing (staging, organization, optimization, previews)
    - âœ… **Step 2**: Model Auditing (validation, error detection, tree output)
    - âœ… **Step 3**: Theme Generation (delete-generate-verify cycle)
    - âœ… **Step 4**: Theme File Auditing (existence, JSON validity, CLI interface)
    - âœ… **Step 5**: Preview Generation (change detection, regeneration, verification)

2. **Output Formatting System**
    - âœ… Green success messages (âœ…)
    - âœ… Red failure messages (âŒ)
    - âœ… Dark grey file paths
    - âœ… Compression statistics in clean format
    - âœ… Verbose mode for detailed workflow information
    - âœ… Tree-structured error output with color coding

3. **Modular Architecture**
    - âœ… `process-icons.ts`: Icon processing (staging, organization, optimization)
    - âœ… `audit-models.ts`: Model validation and error reporting
    - âœ… `generate-themes.ts`: Theme generation workflow
    - âœ… `audit-themes.ts`: Comprehensive theme file validation and auditing
    - âœ… `generate-previews.ts`: Preview image generation (standalone)
    - âœ… `tree-formatter.ts`: Structured error output formatting with configurable titles

### âŒ **INCOMPLETE ITEMS**

1. **Sync to Target System** - Additional workflow step
    - âŒ Target package synchronization not implemented
    - âŒ File date comparison logic missing
    - âŒ Orchestrator extension support missing

### âœ… **COMPLETED ITEMS**

2. **Error Handling & Validation** - Cross-cutting concerns
    - âœ… **Comprehensive Error Reporting System**: Centralized error handling with severity levels, context tracking, and detailed reporting
    - âœ… **Input Validation for External Sources**: Validation of external sources, directories, disk space, and model files
    - âœ… **Rollback Mechanisms**: Automatic backup creation and rollback capabilities for failed operations
    - âœ… **Error Analysis Tools**: CLI-based error reporting, statistics, and export capabilities

## **CRITICAL ARCHITECTURAL GUIDELINES**

### **Theme Generation Principle:**

**Theme files should ONLY include icons that are explicitly assigned in the models.** The theme generation process must NOT include:

- Icons listed in "unassigned" arrays (these are intentionally excluded)
- Any icons that exist in directories but aren't assigned in models
- Orphaned icons that aren't part of the intended icon set

**Rationale:** Theme files represent the **intentional, curated icon set** defined by the models. Including unassigned/orphaned icons violates the principle of model-driven theme generation and creates validation confusion.

### **Validation Principle:**

**Theme auditing should validate the direct correlation between model assignments and generated theme files.** The audit should ensure:

- Every model assignment appears in the generated theme
- No model assignments are missing from the generated theme
- Generated themes contain ONLY valid model assignments (no extras)

## **ERROR HANDLING & VALIDATION SYSTEM - COMPLETED âœ…**

The asset generation workflow now includes a comprehensive error handling and validation system that provides:

### **Error Handling Components:**

**`error-handler.ts`**: Centralized error management system

- **Error Types**: Categorized error types (input validation, file system, processing, rollback, system)
- **Severity Levels**: LOW, MEDIUM, HIGH, CRITICAL with appropriate handling strategies
- **Error Context**: Detailed context tracking including operation, file path, timestamp, process ID
- **Recovery Strategies**: Automatic rollback and recovery mechanisms

**`error-reporter.ts`**: Comprehensive error analysis and reporting

- **Error Reports**: Detailed reports with severity breakdowns and recommendations
- **Error Statistics**: Statistical analysis of error patterns and recovery rates
- **Export Capabilities**: JSON export for external analysis and debugging
- **CLI Interface**: Command-line interface for error management

### **Validation Components:**

**Input Validator**: Pre-processing validation system

- **External Source Validation**: Verifies external icon source accessibility
- **Directory Validation**: Ensures all required directories exist and are accessible
- **Disk Space Validation**: Checks available disk space for operations
- **Model File Validation**: Validates JSON syntax and structure of model files

**Rollback Manager**: Automatic recovery system

- **Operation Registration**: Registers operations with rollback functions
- **Automatic Rollback**: Executes rollback operations in reverse order
- **Backup Management**: Creates automatic backups before modifications

### **Integration Points:**

- **Process Icons**: Integrated input validation and error handling
- **Generate Themes**: Enhanced with model validation and rollback capabilities
- **Audit Scripts**: Error handling for validation failures
- **Preview Generation**: Error handling for generation failures

### **Error Reporting Features:**

- **Severity-Based Handling**: Different responses based on error severity
- **Contextual Information**: Detailed error context for debugging
- **Recovery Recommendations**: Actionable recommendations for error resolution
- **Export Capabilities**: JSON export for external analysis tools

### **Usage Examples:**

```bash
# Generate error report
npx tsx scripts/error-reporter.ts --report error-report.txt

# Export error log
npx tsx scripts/error-reporter.ts --export error-log.json

# Show error statistics
npx tsx scripts/error-reporter.ts --stats

# Clear error log
npx tsx scripts/error-reporter.ts --clear
```

## **NOTES**

All json parsing should leverage the strip json comments package

## **High level description**

## **The asset scripts:**

### **process-icons.ts - COMPLETED âœ…**

**Item 1 (Staging):**

- âœ… Reads from `assetConstants.externalIconSource` (D:/\_dev/!Projects/\_fux/icons)
- âœ… Filters for SVG files only, ignores other file types
- âœ… Uses `assetConstants.deleteOriginalSvg` flag (currently false = copy, true = move)
- âœ… Stages icons to `assets/icons/new_icons` directory
- âœ… Always processes external source icons, overwriting existing if present

**Item 2 (Organization & Optimization):**

- âœ… Organizes staged icons into `file_icons` or `folder_icons` based on `folder-` prefix
- âœ… Always overwrites existing icons in target directories
- âœ… Runs SVGO optimization using `svgo.config.mjs` configuration
- âœ… Shows detailed compression statistics (original â†’ optimized | reduction | percentage)
- âœ… Clean output format: "1 of 1 file icon: filename.svg ( 338 -> 318 | 20 | 6% )"

**Output Format:**

- **Non-verbose**: Clean, minimal status messages
- **Verbose**: Detailed step-by-step workflow information
- **Success Messages**: Green text with âœ… indicators
- **Failure Messages**: Red text with âŒ indicators
- **File Paths**: Dark grey with dashed formatting

---

### **generate-themes.ts - COMPLETED âœ…**

**Theme Generation Workflow:**

- âœ… Deletes existing theme files and verifies removal
- âœ… Generates new themes using `generate_icon_manifests.ts`
- âœ… Verifies theme files exist after generation
- âœ… Consolidated success message: "Success: Theme files removed(verified) and regenerated(verified):"
- âœ… Early exit on deletion or generation failures
- âœ… Proper ANSI color coding (green success, red failure)
- âœ… Dark grey, dashed file paths for generated themes

**Success Output Format:**

```
Success: Theme files removed(verified) and regenerated(verified):
  - dist/assets/themes/base.theme.json
  - dist/assets/themes/dynamicons.theme.json
```

**Failure Handling:**

- Deletion failure: Red error message + early exit
- Generation failure: Green deletion success + red generation error + early exit

### **generate-previews.ts - COMPLETED âœ…**

**Preview Generation Workflow:**

- âœ… Automatically detects icon changes (staged > 0 or optimized > 0)
- âœ… Forces regeneration when changes detected
- âœ… Deletes existing previews, verifies deletion success
- âœ… Generates new previews using `generatePreviewsMain('all', true)`
- âœ… Verifies all three files created successfully
- âœ… Clean success/failure messages with proper ANSI colors
- âœ… CLI interface for standalone preview generation
- âœ… Force regeneration option (`--force` flag)

**Key Functions:**

- `generatePreviews()`: Main preview generation with change detection
- `checkPreviewImages()`: Check if preview images exist
- `forceRegeneratePreviews()`: Force regeneration of all previews

**Usage:**

```bash
# Check and generate if needed
npx tsx packages/dynamicons/assets/scripts/generate-previews.ts

# Force regeneration
npx tsx packages/dynamicons/assets/scripts/generate-previews.ts --force

# Verbose mode
npx tsx packages/dynamicons/assets/scripts/generate-previews.ts --verbose
```

---

## **Process Theme Files - COMPLETED âœ…**

Using the models in src/models, if nx detects that changes any of the model files changes:

1. âœ… Generate the core/dist/assets/themes/base.theme.json
2. âœ… Generate the core/dist/assets/themes/dynamicons.theme.json

**Model Integration:**

- **File Icons**: Processes `file_icons.model.json` with `iconName` key for file icon assignments
- **Folder Icons**: Processes `folder_icons.model.json` with `iconName` key for folder icon assignments
- **Language Icons**: Processes `language_icons.model.json` with `languageID` and `iconName` keys for language assignments
- **Model-Driven Generation**: Only includes icons explicitly assigned in models, excluding "unassigned" arrays and orphaned icons

## **Theme File Auditing - COMPLETED âœ… (`audit-themes.ts`)**

**Current Status:** Comprehensive theme auditing functionality implemented in `packages/dynamicons/assets/scripts/audit-themes.ts`. It validates the direct correlation between model assignments and generated theme files, ensuring 100% accuracy in the theme generation process.

### **Validation Categories:**

**THEME: MISSING MODEL ASSIGNMENT**: Model file/folder assignments not found in generated theme files
**THEME: MISSING LANGUAGE ASSIGNMENT**: Model language assignments not found in generated theme files
**THEME: EXTRA ASSIGNMENT**: Theme file/folder assignments in generated files not specified in models
**THEME: EXTRA LANGUAGE ASSIGNMENT**: Language assignments in generated theme not specified in models
**THEME: DUPLICATE ASSIGNMENT**: Multiple assignments of the same icon in generated theme
**THEME FILE EXISTENCE**: Verifies base.theme.json and dynamicons.theme.json exist
**THEME IDENTITY**: Confirms themes are identical except for color overrides

### **Core Functionality:**

- âœ… **Theme File Validation**: Verifies existence and identity of base.theme.json and dynamicons.theme.json
- âœ… **Model-to-Theme Correlation**: Validates 100% correlation between model assignments and generated theme files
- âœ… **Icon Assignment Validation**: Comprehensive validation of file, folder, and language icon assignments from models
- âœ… **Folder Icon Pairing**: Advanced logic for handling `_folder-basic` and `_folder-basic-open` pairs from model assignments
- âœ… **Missing Icon Detection**: Identifies model assignments referencing non-existent icon files in generated theme
- âœ… **Orphaned Icon Detection**: Finds icons in directories not assigned in models (should not appear in generated theme)
- âœ… **Duplicate Assignment Detection**: Identifies duplicate assignments within models (should not appear in generated theme)
- âœ… **Tree-Structured Output**: Configurable tree formatter with theme-specific section titles

### **Key Functions:**

- `auditThemes()`: Main audit function returning comprehensive validation results
- `validateThemes()`: High-level validation with user-friendly output and tree formatting
- `validateIconAssignments()`: Validates model assignments against generated theme files
- `checkOrphanedIcons()`: Identifies icons in directories not assigned in models
- `checkDuplicateAssignments()`: Detects duplicate assignments in models

### **Advanced Features:**

**Model-to-Theme Correlation Validation:**

- Validates that every model assignment appears correctly in generated theme files
- Ensures no model assignments are missing from generated themes
- Confirms that generated themes contain only valid model assignments
- Reports any discrepancies between model assignments and theme generation

**Folder Icon Pairing Logic:**

- Groups `_folder-basic` and `_folder-basic-open` assignments by base name from models
- Removes underscore prefixes and `folder-` prefixes for proper comparison
- Validates both base and open variants exist for each folder assignment in generated theme
- Reports missing variants with specific descriptions

**Underscore Prefix Handling:**

- Correctly processes model assignments with underscore prefixes (`_file`, `_folder-basic`)
- Removes prefixes for comparison with actual icon file names
- Maintains original assignment names in error reporting

**Tree-Structured Error Output:**

- Uses configurable section titles: "THEME: ASSIGNED ICON NOT FOUND", "THEME: UNASSIGNED ICON", etc.
- Groups errors by type (FILE, FOLDER, LANGUAGE)
- Provides clear, actionable error information

### **Usage:**

```bash
# Run theme audit
npx tsx packages/dynamicons/assets/scripts/audit-themes.ts

# Verbose mode (if implemented)
npx tsx packages/dynamicons/assets/scripts/audit-themes.ts --verbose
```

### **Example Output:**

```
âŒ THEME ERRORS (63):
â””â”€ FOLDER
   â””â”€ THEME: UNASSIGNED ICON
      â”œâ”€ action-arrows
      â”œâ”€ arduino
      â”œâ”€ basic
      â”œâ”€ binary
      â””â”€ ...

âŒ Theme validation failed. Please fix the errors above before proceeding.
```

---

## **Sync to target - NOT IMPLEMENTED âŒ**

Depending on a passed arg, will check the dist of either

- the dynamicons ext
- the main orchestrator extension (not implemented yet)
  and copy any icon or theme file that:
- Does not already exist in the target package
- has max(created/modified date) greater than the max(created/modified date) of the same file already in the target package

## **MODEL AUDITING - IMPLEMENTED âœ…**

**Current Status:** The models audit functionality is fully implemented and working within the `generate-themes.ts` script. It includes:

- âœ… Model validation and error reporting
- âœ… Assignment error detection (assigned icon not found, duplicate assignments)
- âœ… Orphaned icon detection (icons in directories not assigned in models)
- âœ… Tree-structured error output with proper formatting
- âœ… Early exit on model errors before theme generation
- âœ… **Standardized Model Key Support**: Validates `iconName` for file/folder icons and `languageID` for language icons
- âœ… **Language Model Validation**: Audits `language_icons.model.json` for proper language assignments

**Next Step:** Extract the audit functionality into a separate `audit-models.ts` script to:

- Improve code organization and separation of concerns
- Allow independent model auditing without theme generation
- Enable reuse in other parts of the asset generation workflow

## **TreeFormatter Class Documentation**

The `TreeFormatter` class (`packages/dynamicons/assets/scripts/tree-formatter.ts`) provides structured tree output formatting for validation errors. It creates a hierarchical tree structure with proper indentation, branch characters, and color coding. The class now supports configurable error titles and section titles for different audit types (model vs theme).

### **Class Features:**

- **Depth-based Color Coding**: Different colors for each tree depth level
    - Depth 1 (cyan): Top-level groups (FILE, FOLDER, LANGUAGE)
    - Depth 2 (yellow): Section headers (MODEL: ..., DIRECTORY: ...)
    - Depth 3 (reset): Actual error items (no color)

- **Automatic Tree Structure**: Builds tree from validation arrays with proper parent-child relationships

- **Prefix Calculation**: Automatically calculates correct indentation and branch characters:
    - `â”œâ”€` for non-last items
    - `â””â”€` for last items
    - `â”‚  ` for vertical lines connecting branches
    - `   ` for spaces when parent is last

### **Example Output:**

```
âŒ MODEL ERRORS (4):
â”œâ”€ FILE ICONS
â”‚ â”œâ”€ ORPHANED ICONS
â”‚ â”‚ â””â”€ pycache-alt
â”‚ â””â”€ DUPLICATE ASSIGNMENT
â”‚   â””â”€ ahk
â””â”€ FOLDER ICONS
  â”œâ”€ ORPHANS
  â”‚ â”œâ”€ folder-luggage
  â”‚ â””â”€ folder-notes
  â””â”€ DUPLICATE ASSIGNMENT
    â””â”€ theme
```

### **Key Methods:**

- **`buildTreeFromArrays()`**: Converts validation arrays into tree structure with configurable section titles
- **`outputTree()`**: Outputs tree directly to console with colors
- **`formatTree()`**: Returns tree as formatted string
- **`displayStructuredErrors()`**: Main function for displaying validation errors with configurable titles

### **Tree Structure Logic:**

The formatter automatically:

1. Groups errors by type (FILE, FOLDER, LANGUAGE)
2. Creates section headers for error categories using configurable titles
3. Lists individual error items under appropriate sections
4. Calculates correct indentation based on depth and position
5. Applies color coding based on tree depth
6. Handles "last child" detection for proper branch character selection

### **Configurable Features:**

**Error Title Customization:**

- Main error title can be customized (e.g., "MODEL ERRORS", "THEME ERRORS")
- Supports different audit types with appropriate branding

**Section Title Customization:**

- Section titles can be customized for different audit contexts
- Model audit: "MODEL: ASSIGNED ICON NOT FOUND", "DIRECTORY: UNASSIGNED ICON"
- Theme audit: "THEME: ASSIGNED ICON NOT FOUND", "THEME: UNASSIGNED ICON"
- Maintains consistency while providing context-appropriate messaging

### **Usage:**

```typescript
import { displayStructuredErrors } from './tree-formatter.js'

// Display model errors with tree formatting
displayStructuredErrors(
    themeErrors,
    orphanedFileIcons,
    orphanedFolderIcons,
    orphanedLanguageIcons,
    duplicateFileIcons,
    duplicateFolderIcons,
    duplicateLanguageIcons,
    orphanedFileAssignments,
    orphanedFolderAssignments,
    orphanedLanguageAssignments,
    invalidLanguageIds,
    'MODEL ERRORS', // Custom error title
    {
        assignedIconNotFound: 'MODEL: ASSIGNED ICON NOT FOUND',
        duplicateAssignment: 'MODEL: DUPLICATE ASSIGNMENT',
        unassignedIcon: 'DIRECTORY: UNASSIGNED ICON',
        duplicateAssignmentId: 'MODEL: DUPLICATE ASSIGNMENT ID',
    }
)

// Display theme errors with tree formatting
displayStructuredErrors(
    [], // themeErrors (not used for theme audit)
    orphanedFileIcons,
    orphanedFolderIcons,
    [], // orphanedLanguageIcons (not applicable for theme audit)
    duplicateFileAssignments,
    duplicateFolderAssignments,
    duplicateLanguageAssignments,
    missingFileIcons,
    missingFolderIcons,
    [], // missingLanguageIcons (not applicable for theme audit)
    [], // invalidLanguageIds (not applicable for theme audit)
    'THEME ERRORS', // Custom error title
    {
        assignedIconNotFound: 'THEME: ASSIGNED ICON NOT FOUND',
        duplicateAssignment: 'THEME: DUPLICATE ASSIGNMENT',
        unassignedIcon: 'THEME: UNASSIGNED ICON',
        duplicateAssignmentId: 'THEME: DUPLICATE ASSIGNMENT ID',
    }
)
```

## **MODEL VALIDATION WORKFLOW - IMPLEMENTED âœ… (NEEDS EXTRACTION ğŸ”„)**

Firstly verify there are no model errors,

The output should have this tree structure:

âŒ MODEL ERRORS (??):

**MODEL: ASSIGNED ICON NOT FOUND**: When value of iconName is not a found icon
**MODEL: DUPLICATE ASSIGNMENT**: When value of iconName is assigned more than once
**DIRECTORY: UNASSIGNED ICON**: When icon exists in directory, but not assigned or in orphans array

**MODEL: ASSIGNED ICON NOT FOUND**:

- When value of 'folder-{icon.iconName}.svg' is not a found icon it will append (closed). Example: arduino (closed)
- When value of 'folder-{icon.iconName}-open.svg' is not a found icon it will show (open) Example: arduino (open)
- When both of the above is true, it will show (closed,open) Example: arduino (closed,open)
  **MODEL: DUPLICATE ASSIGNMENT**: When value of iconName is assigned more than once
  **DIRECTORY: UNASSIGNED ICON**: When icon exists in directory, but not assigned or in orphans array

**MODEL: ASSIGNED ICON NOT FOUND**: When value of iconName is not a found icon
**MODEL: DUPLICATE ASSIGNMENT ID**: When value of languageID is assigned more than once

if there are errors in the models audit show the error output

âŒ MODEL ERRORS (6):
â”œâ”€ ...

and exit with errors

## **THEME GENERATION WORKFLOW - COMPLETED âœ…**

Action taken
delete generated theme files if exists, then verify they were removed before showing the status message.

Successful = Success: Existing theme files deleted and verified.
Failed = Failed: Existing theme files not removed.

Action taken
Generate theme files, then verify the theme files exist before showing message

If successful:
Success: Theme files removed(verified) and regenerated(verified):
â”œâ”€ dist/assets/themes/base.theme.json
â””â”€ dist/assets/themes/dynamicons.theme.json

or if failed:

Error: Generating theme files
Then show the error type and description

## **PREVIEW GENERATION WORKFLOW - COMPLETED âœ…**

The Preview Generation verifies that there are three preview images generated

If all three images already exist, say so as a green success message
If they do not exist, generate them, verify they exist after generation then if they exist say so as a green success message

else report as a failure with the failure type and description in red text

**Current Implementation:**

- âœ… Automatically detects icon changes (staged > 0 or optimized > 0)
- âœ… Forces regeneration when changes detected
- âœ… Deletes existing previews, verifies deletion success
- âœ… Generates new previews using `generatePreviewsMain('all', true)`
- âœ… Verifies all three files created successfully
- âœ… Clean success/failure messages with proper ANSI colors
- âœ… Verbose mode controls detailed output display
