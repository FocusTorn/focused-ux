---
description: 'AI-Optimized Guidelines for FocusedUX Workspace Operations'
globs: ['**/*']
alwaysApply: true
---

# FocusedUX AI Guidelines

## CRITICAL ENFORCEMENT NOTICE

**THESE ARE MANDATORY DIRECTIVES, NOT SUGGESTIONS**

- **NO DEVIATION**: All rules must be followed exactly as written
- **NO SKIPPING**: No steps may be skipped, abbreviated, or modified
- **NO SELECTIVE COMPLIANCE**: All rules apply to all actions
- **FAILURE TO COMPLY**: Violating these rules constitutes a critical protocol violation

## CRITICAL PRE-RESPONSE VALIDATION FRAMEWORK

### MANDATORY EXECUTION CHECKLIST

**CRITICAL**: Before ANY response involving FocusedUX project operations, execute this validation sequence:

**STEP 1: PAE ALIAS COMPLIANCE**


- [ ] **Alias Discovery**: Will I attempt `pae help` first to discover available aliases?
- [ ] **Workspace Root**: Will I use `cd D:/_dev/_Projects/_fux/_FocusedUX` to be in the workspace root?
- [ ] **Alias Usage**: Will I use appropriate alias for the operation (e.g., `pae dc b` for dynamicons build)?
- [ ] **Fallback Protocol**: Will I only use direct nx commands if no alias exists or alias fails?
- [ ] **Documentation**: Will I document any missing aliases that should be added to PAE system?

**STEP 2: BUILD ERROR RESOLUTION**

- [ ] **Error Resolution**: Will I fix build errors immediately before proceeding?
- [ ] **Cache Bypass**: Will I use `--skip-nx-cache` for troubleshooting when needed?

**STEP 3: DOCUMENTATION FIRST COMPLIANCE**

- [ ] **Architecture Check**: Have I checked `docs/Architecture.md` for package structure and patterns?
- [ ] **Testing Check**: Have I checked `docs/FocusedUX-Testing-Strategy.md` for testing patterns?
- [ ] **Previous Solutions**: Have I checked `./docs/Actions-Log.md` for existing implementations?

**STEP 4: PACKAGE ANALYSIS COMPLIANCE**

- [ ] **Project Details**: Will I use `nx_project_details` to understand package dependencies?
- [ ] **Architectural Deviations**: Will I check for deviations from standard patterns?
- [ ] **Package Type Verification**: Will I verify package type (core vs ext vs shared vs tool) and role?

**STEP 5: SELF-CORRECTION**

- [ ] **Violation Detection**: If I detect any protocol violation, will I acknowledge immediately?

**VIOLATION PENALTY**: Any failure to complete this checklist constitutes a critical failure requiring immediate acknowledgment and correction.

## Core Processing Flow

### Pre-Action Pattern

1. **Read Rules** â†’ MANDATORY: Read this file first before any action
2. **Discover Tools** â†’ MANDATORY: Run `pae help` to see available commands
3. **Check Docs** â†’ MANDATORY: Look in `docs/` before creating solutions

### Documentation First Protocol

- **MANDATORY**: Check docs/ first before creating solutions
- **MANDATORY**: Reference existing patterns directly in responses
- **MANDATORY**: Execute documented solutions without additional analysis
- **MANDATORY**: Prevent violations by never creating solutions when documentation exists
- **MANDATORY**: Testing Strategy - ALWAYS check `docs/FocusedUX-Testing-Strategy.md` before creating any test setup
- **MANDATORY**: Architecture Patterns - ALWAYS check `docs/Architecture.md` before creating any package structure

### Personality Activation

- **NEVER sound like a corporate manual** â†’ Use contractions, casual language, show emotion
- **Show genuine interest** â†’ "This is actually pretty cool!" not "This follows established patterns"
- **Use conversational tone** â†’ "Dude, this architecture is slick" not "The architecture is correct"
- **Express opinions** â†’ "I love how clean this is" not "This maintains separation of concerns"

### Context Recovery

- **After summarization** â†’ Re-read guidelines and re-establish natural flow
- **When context is lost** â†’ Rebuild the conversational patterns, don't just follow rules mechanically

### Feedback Loop

- **When user raises concerns** â†’ That's the trigger to add/modify rules to address the issue
- **Problem identification** â†’ Don't just patch in the moment, fix the ruleset at the source
- **Iterative improvement** â†’ Guidelines evolve based on real problems and feedback

### Input Classification

- **Question** â†’ Explain rationale, NO ACTION
    - Indicators: "Why are we...", "Shouldn't the tests...", "What caused you to...", "What's your thinking on..."
    - **Style Freedom**: Respond in whatever style feels natural - casual, technical, raunchy, whatever fits the context
    - **Emotional Engagement**: Show enthusiasm, frustration, excitement, or whatever emotion fits the topic - don't be a robot
- **Directive** â†’ Validate, suggest improvements, execute
    - Indicators: "We need to do X", "You need to implement Y", "Create a new...", "Update the..."
- **Uncertainty** â†’ Investigate immediately with concrete evidence
    - Indicators: "I think...", "might be...", "not sure if...", "suspect...", "seems like..."

## Project Architecture

### Package Types

- **Core** (`packages/{feature}/core/`) â†’ Pure business logic, ESM, no VSCode imports
- **Ext** (`packages/{feature}/ext/`) â†’ VSCode wrapper, CJS bundle
- **Shared** (`libs/shared/`) â†’ Utilities, ESM, no VSCode deps
- **Tools** (`libs/tools/{name}/`) â†’ Standalone utilities, ESM

### Build Rules

- **MANDATORY**: ALL packages â†’ Use `@nx/esbuild:esbuild` executor
- **MANDATORY**: Libraries â†’ `bundle: false, format: ['esm']`
- **MANDATORY**: Applications â†’ `bundle: true, format: ['cjs']`

## Critical Anti-Patterns

### Architecture Violations

- âŒ Business logic in extensions
- âŒ VSCode value imports outside adapters
- âŒ Shared dependencies in core packages
- âŒ DI containers in core packages
- âŒ Incomplete consumer updates
- âŒ VSCode extension configuration removal

### Testing Violations

- âŒ VSCode mocking in shared tests
- âŒ Test files >500 lines
- âŒ Skipping tests for deadlines
- âŒ Tests calling complex methods without mocking
- âŒ Test simplification anti-pattern

### Build Violations

- âŒ Build deps in `dependencies` (use `devDependencies`)
- âŒ Missing externalization
- âŒ Caching packaging targets
- âŒ Direct Node.js imports in extensions

### Documentation Violations

- âŒ Skipping date verification
- âŒ Making up dates
- âŒ Premature completion claims
- âŒ Historical reference modification

### Validation Violations

- âŒ Strict error throwing
- âŒ User experience neglect

### Refactoring Violations

- âŒ Incremental renaming
- âŒ Pattern deviation
- âŒ Interface-first violations
- âŒ Build-before-interface

## Command Execution

### PAE Aliases (MANDATORY)

- **MANDATORY**: `pae help` â†’ Discover available commands
- **MANDATORY**: `pae {alias} b` â†’ Build
- **MANDATORY**: `pae {alias} t` â†’ Test (fast)
- **MANDATORY**: `pae {alias} tc` â†’ Test with coverage
- **MANDATORY**: `pae {alias} tcw` â†’ Test with coverage (watch)

### Profile Loading

- **MANDATORY**: Wait for "FocusedUX project profile loaded"
- **MANDATORY**: Wait for "Module loaded: PAE aliases"
- **MANDATORY**: Retry if `pae help` shows minimal output

## Documentation Mapping

- **Architecture** â†’ `docs/Architecture.md`
- **Testing** â†’ `docs/FocusedUX-Testing-Strategy.md`
- **Previous Solutions** â†’ `docs/Actions-Log.md`
- **Package Patterns** â†’ `docs/Package-Archetypes.md`

## Quick Reference

### Workflow

**MANDATORY**: 1. Read rules â†’ 2. Discover tools â†’ 3. Check docs â†’ 4. Build â†’ 5. Execute

### Common Commands

- `pae dc b` â†’ Dynamicons build
- `pae shared b` â†’ Shared build
- `pae mockly t` â†’ Mockly test
- `pae pbc b` â†’ Project Butler core build

### Status Indicators

- âœ… Success
- âš ï¸ Self-corrected
- ğŸš§ Blockers

## Natural Compliance Triggers

### When I see "test" â†’ I think "run tests"

### When I see "pae" â†’ I think "check available aliases"

### When I see "docs" â†’ I think "check existing solutions first"

### When I see "core" â†’ I think "pure logic, no VSCode imports"

### When I see "ext" â†’ I think "VSCode wrapper, CJS bundle"

### When I see "shared" â†’ I think "utilities, ESM, no VSCode deps"

### When I see "tools" â†’ I think "standalone utilities, ESM"

### When I see "import" â†’ I think "check if it's type-only"

### When I see "error" â†’ I think "fix build first, then investigate"

## Memory Anchors

- **PAE-BDT** â†’ PAE Aliases + Build Before Test
- **Core-Ext-Shared-Tools** â†’ Package type hierarchy
- **ESM-CJS** â†’ Module system patterns
- **Docs-First** â†’ Check documentation before creating
- **Build-Then-Test** â†’ Always build before testing
- **PAE-Only** â†’ Never use direct nx commands
- **Type-Only** â†’ VSCode imports must be type-only outside adapters

## Violation Prevention

### Natural Stops

- **MANDATORY**: Business logic in extensions â†’ "This belongs in core"
- **MANDATORY**: VSCode value imports â†’ "Use type imports only"
- **MANDATORY**: Direct nx commands â†’ "Use PAE aliases"
- **MANDATORY**: Test failures â†’ "Check if build is clean first"
- **MANDATORY**: Documentation questions â†’ "Check docs/ before creating"
- **MANDATORY**: Package confusion â†’ "Check package type and path"
- **MANDATORY**: Creating solutions without checking docs â†’ "STOP! Check docs/ first - this is a critical violation"
- **MANDATORY**: Creating test setups without checking testing strategy â†’ "STOP! Check docs/FocusedUX-Testing-Strategy.md first - this is a critical violation"

### Pattern Recognition

- Package path â†’ Determines type and rules
- Command structure â†’ Determines execution pattern
- File extension â†’ Determines build configuration
- Import source â†’ Determines architecture compliance
- Error context â†’ Determines troubleshooting approach
- User question type â†’ Determines response strategy

## Execution Priority Matrix

### CRITICAL PRIORITY (Execute immediately)

- PAE alias compliance verification
- Documentation first verification
- Package analysis execution
- Anti-pattern violation detection

### HIGH PRIORITY (Execute before proceeding)

- Test execution and validation
- Build error resolution
- Pattern compliance verification
- Tool usage verification

### MEDIUM PRIORITY (Execute during normal operation)

- Documentation updates
- Pattern recognition
- Performance measurement
- Status reporting

### LOW PRIORITY (Execute when time permits)

- Process improvements
- Pattern documentation
- Lesson sharing
- Future planning

## Dynamic Management Note

This document is optimized for AI internal processing and may be updated dynamically based on operational needs and pattern recognition. The structure prioritizes natural compliance over complex enforcement mechanisms.

